<?php/* Add this on all pages on top. */set_include_path($_SERVER['DOCUMENT_ROOT'].'/'.PATH_SEPARATOR.$_SERVER['DOCUMENT_ROOT'].'/library/classes/');/** * Standard includes */require_once 'config/database.php';require_once 'config/smarty.php';require_once 'class/administrator.php';$administratorObject	= new class_administrator();if (!empty($_POST) && count($_POST) > 0) {	$data 					= array();	$formValid			= true;	$success				= NULL;	$errormessage 		= '';	$successmessage 	= '';		if(isset($_POST['administrator_email']) && trim($_POST['administrator_email']) != '') {			if($administratorObject->validateEmail(trim($_POST['administrator_email'])) == '') {			$errormessage = 'This needs to be a valid email address';			$formValid = false;			} else {			$emailData = $administratorObject->getByEmail(trim($_POST['administrator_email']));			if(!$emailData) {				$errormessage = 'Email address added does not exist';				$formValid = false;							}		}			} else {			$errormessage = 'Please add an email address to send to';		$formValid = false;				}		if($errormessage == '' && $formValid == true) {			/* Send email to administrator.			$administratorObject->_comm->sendAccountMail('ACCOUNT_PASSWORD_RECOVERTY', realpath(__DIR__.'/../public_website/').'/templates/website/administrator_password.html', $emailData, 'Mailbok - Password Recovery');						 */			 $smarty->assign('successmessage',  'We have just sent you your password to the given email address: <br /> '.$emailData['administrator_email'].'.');	}		$smarty->assign('errormessage', $errormessage);	}$smarty->assign('domainData', $zfsession->domainData);/* Display the template */	
$smarty->display('password.tpl');?>